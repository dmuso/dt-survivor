{"id":"dt-survivor-1a7","title":"Create combat module structure","description":"Create src/combat/ module with mod.rs, components.rs, events.rs, systems.rs, plugin.rs. This is the foundation for unified combat handling. Files: src/combat/mod.rs (with re-exports), src/lib.rs (add pub mod combat).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.385295+11:00","updated_at":"2025-12-25T17:55:30.171884+11:00","closed_at":"2025-12-25T17:55:30.171884+11:00","dependencies":[{"issue_id":"dt-survivor-1a7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.617448+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1j2","title":"Create movement systems","description":"Create src/movement/systems.rs with: apply_velocity (updates Transform from Velocity), apply_knockback (applies and decays knockback). Move player_movement from game/systems.rs, enemy_movement_system from enemies/systems.rs. Include tests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.59513+11:00","updated_at":"2025-12-25T17:41:29.59513+11:00","dependencies":[{"issue_id":"dt-survivor-1j2","depends_on_id":"dt-survivor-e9f","type":"blocks","created_at":"2025-12-25T17:41:45.262226+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-1j2","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.958906+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1wg","title":"Create DamageEvent and DeathEvent","description":"Create combat events in src/combat/events.rs: DamageEvent { target: Entity, amount: f32, source: Option\u003cEntity\u003e }, DeathEvent { entity: Entity, position: Vec3, entity_type: EntityType }. Move existing EnemyDeathEvent logic to use these unified events.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.612206+11:00","updated_at":"2025-12-25T17:58:22.468784+11:00","closed_at":"2025-12-25T17:58:22.468784+11:00","dependencies":[{"issue_id":"dt-survivor-1wg","depends_on_id":"dt-survivor-1a7","type":"blocks","created_at":"2025-12-25T17:40:45.118858+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-1wg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.776952+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-3z7","title":"Create MovementPlugin","description":"Create src/movement/plugin.rs with MovementPlugin that registers systems with run_if(in_state(GameState::InGame)).in_set(GameSet::Movement). Update game/plugin.rs to delegate movement systems.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.704911+11:00","updated_at":"2025-12-25T17:41:29.704911+11:00","dependencies":[{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-1j2","type":"blocks","created_at":"2025-12-25T17:41:45.36079+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:41:45.449523+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.047496+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-45y","title":"Run full test suite and fix regressions","description":"After all refactoring is complete, run cargo test to verify all tests pass. Run cargo clippy to fix any warnings. Ensure 90% code coverage is maintained. Fix any regressions introduced during refactoring.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-25T17:42:02.902028+11:00","updated_at":"2025-12-25T17:42:02.902028+11:00","dependencies":[{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-f77","type":"blocks","created_at":"2025-12-25T17:42:20.284677+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-70v","type":"blocks","created_at":"2025-12-25T17:42:20.363162+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:42:20.446812+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-3z7","type":"blocks","created_at":"2025-12-25T17:42:20.531606+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-cch","type":"blocks","created_at":"2025-12-25T17:42:20.60702+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-8hu","type":"blocks","created_at":"2025-12-25T17:42:20.683525+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-6x9","type":"blocks","created_at":"2025-12-25T17:42:20.766376+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-8s7","type":"blocks","created_at":"2025-12-25T17:42:20.842823+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-ubg","type":"blocks","created_at":"2025-12-25T17:42:20.92369+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-7m0","type":"blocks","created_at":"2025-12-25T17:42:21.009282+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-d0t","type":"blocks","created_at":"2025-12-25T17:42:21.093144+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.497406+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-4w1","title":"Fix failing tests in bullets and game modules","description":"Six tests are currently failing: test_bullet_collision_detection, test_bullet_collision_no_collision (panic in run_main), and four tests in game::systems::tests related to player-enemy collision damage (test_player_enemy_collision_immediate_damage, test_player_enemy_collision_damage_cooldown, test_player_death_on_zero_health, test_damage_timer_reset_when_not_touching). These failures appear to be pre-existing issues with the collision/damage systems.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T18:04:53.402234+11:00","updated_at":"2025-12-25T18:17:15.454951+11:00","closed_at":"2025-12-25T18:17:15.454951+11:00"}
{"id":"dt-survivor-6q4","title":"Create movement module structure","description":"Create src/movement/ module with mod.rs, components.rs, systems.rs, plugin.rs. This consolidates movement logic from game and enemies modules. Add pub mod movement to lib.rs and movement_plugin to main.rs.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.367885+11:00","updated_at":"2025-12-25T17:41:29.367885+11:00","dependencies":[{"issue_id":"dt-survivor-6q4","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.790851+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-6x9","title":"Centralize event registration","description":"Fix event registration redundancy. EnemyDeathEvent currently registered in game/plugin.rs, enemy_death/plugin.rs, and laser tests. Centralize: combat/plugin.rs owns DamageEvent/DeathEvent, game/plugin.rs owns collision events, loot/plugin.rs owns pickup events. Remove duplicates.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:30.051186+11:00","updated_at":"2025-12-25T17:41:30.051186+11:00","dependencies":[{"issue_id":"dt-survivor-6x9","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:41:45.611306+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-6x9","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.311655+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-70v","title":"Extract Player health to Health component","description":"Refactor src/player/components.rs: remove health, max_health from Player struct. Modify player spawn to attach separate Health component. Update player_health_regeneration_system and damage systems to use Health component. Keeps regen_rate in Player.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:29.062224+11:00","updated_at":"2025-12-25T17:40:29.062224+11:00","dependencies":[{"issue_id":"dt-survivor-70v","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:40:45.536817+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-70v","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:46.097014+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-78g","title":"Fix failing integration tests in main.rs due to missing ActivePowerups resource","description":"Eight integration tests in main.rs are failing because the ActivePowerups resource is not initialized. Tests failing: test_weapon_firing_spawns_bullets, test_scoring_integration_full_flow, test_scoring_integration_multiple_enemies, test_scoring_integration_score_persistence, test_weapon_equipped_to_player, test_weapon_slots_ui_created, test_no_blank_screen_during_transitions, test_camera_reuse_across_state_transitions. The system donny_tango_survivor::loot::systems::apply_item_effects requires ResMut\u003cActivePowerups\u003e but the resource doesn't exist in the test app context.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-25T18:17:08.650091+11:00","updated_at":"2025-12-25T18:17:08.650091+11:00","dependencies":[{"issue_id":"dt-survivor-78g","depends_on_id":"dt-survivor-4w1","type":"discovered-from","created_at":"2025-12-25T18:17:08.652038+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-7gg","title":"Configure SystemSet ordering in plugin","description":"Update src/game/plugin.rs to configure set ordering: app.configure_sets(Update, (GameSet::Input, GameSet::Movement, GameSet::Combat, GameSet::Spawning, GameSet::Effects, GameSet::Cleanup).chain()). Assign existing systems to appropriate sets using .in_set().","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:02.078328+11:00","updated_at":"2025-12-25T17:41:02.078328+11:00","dependencies":[{"issue_id":"dt-survivor-7gg","depends_on_id":"dt-survivor-bem","type":"blocks","created_at":"2025-12-25T17:41:10.264016+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-7gg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:10.503212+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-7m0","title":"Use WeaponType enum in UI components","description":"Update src/ui/components.rs: change WeaponIcon { weapon_type: String } to WeaponIcon { weapon_type: WeaponType }. Same for WeaponLevelDisplay. Update UI systems to use enum matching instead of string comparison. Improves type safety.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.620929+11:00","updated_at":"2025-12-25T17:42:02.620929+11:00","dependencies":[{"issue_id":"dt-survivor-7m0","depends_on_id":"dt-survivor-cch","type":"blocks","created_at":"2025-12-25T17:42:20.034756+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-7m0","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.337279+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8hu","title":"Complete loot module migration","description":"Remove legacy code from loot module: delete LootItem component, remove loot_spawning_system, loot_attraction_system, loot_movement_system. Keep new ECS-based systems: detect_pickup_collisions, update_item_attraction, apply_item_effects. Update loot/plugin.rs registrations.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.937241+11:00","updated_at":"2025-12-25T17:41:29.937241+11:00","dependencies":[{"issue_id":"dt-survivor-8hu","depends_on_id":"dt-survivor-f77","type":"blocks","created_at":"2025-12-25T17:41:45.704476+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-8hu","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.214775+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8s7","title":"Add GameOverEvent","description":"Create GameOverEvent in src/game/events.rs with final_score: u32, survival_time: f32. Update player_death_system to fire event before state transition. UI and audio systems can listen for this event. Decouples game over handling from direct state manipulation.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.391996+11:00","updated_at":"2025-12-25T17:42:02.391996+11:00","dependencies":[{"issue_id":"dt-survivor-8s7","depends_on_id":"dt-survivor-1wg","type":"blocks","created_at":"2025-12-25T17:42:19.872421+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-8s7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.170925+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-bem","title":"Create GameSet SystemSets","description":"Add SystemSets for explicit system ordering in src/game/sets.rs (or systems.rs): GameSet enum with Input, Movement, Combat, Spawning, Effects, Cleanup variants. Derive SystemSet, Debug, Clone, PartialEq, Eq, Hash. Export from game module.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:01.959314+11:00","updated_at":"2025-12-25T17:41:01.959314+11:00","dependencies":[{"issue_id":"dt-survivor-bem","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:41:10.341444+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-bem","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:10.420985+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-cch","title":"Populate weapon plugin with systems","description":"Move weapon systems from src/game/plugin.rs to src/weapon/plugin.rs: weapon_firing_system, weapon_follow_player_system. Update game/plugin.rs to add WeaponPlugin as sub-plugin. Currently weapon/plugin.rs is an empty stub.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.82361+11:00","updated_at":"2025-12-25T17:41:29.82361+11:00","dependencies":[{"issue_id":"dt-survivor-cch","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:41:45.529638+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-cch","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.130346+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-d0t","title":"Expand prelude.rs with new modules","description":"Update src/prelude.rs to include commonly used types from new modules: pub use crate::combat::*; pub use crate::movement::*; pub use crate::weapon::WeaponType;. Keeps imports convenient across codebase.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.74856+11:00","updated_at":"2025-12-25T17:42:02.74856+11:00","dependencies":[{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:42:20.114365+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-3z7","type":"blocks","created_at":"2025-12-25T17:42:20.201006+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.416994+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-e9f","title":"Create Velocity and Speed components","description":"Create movement components in src/movement/components.rs: Velocity(Vec2), Speed(f32), Knockback { direction: Vec2, force: f32, duration: Timer }. These are reusable for player, enemies, and projectiles. Include tests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.475915+11:00","updated_at":"2025-12-25T17:41:29.475915+11:00","dependencies":[{"issue_id":"dt-survivor-e9f","depends_on_id":"dt-survivor-6q4","type":"blocks","created_at":"2025-12-25T17:41:45.165143+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e9f","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.874979+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-f77","title":"Add Health component to enemies","description":"Modify src/enemies/systems.rs to spawn enemies with Health component. Update src/bullets/systems.rs and src/laser/systems.rs to use DamageEvent instead of instant despawn. Enemies should now take damage and die when health reaches 0. Enables multi-hit enemies and boss fights.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.947115+11:00","updated_at":"2025-12-25T17:40:28.947115+11:00","dependencies":[{"issue_id":"dt-survivor-f77","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:40:45.450648+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-f77","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:46.014939+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-s2u","title":"Refactor codebase to Bevy ECS best practices","description":"Comprehensive refactoring to align the dt-survivor codebase with Bevy ECS best practices. Includes: unified combat module with Health/Damage components, SystemSets for explicit ordering, movement module consolidation, weapon plugin population, loot module cleanup, event registration fixes, and various polish items. See plan at ~/.claude/plans/lovely-napping-starfish.md for full details.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-25T17:40:02.957854+11:00","updated_at":"2025-12-25T17:40:02.957854+11:00"}
{"id":"dt-survivor-ubg","title":"Consolidate timer cleanup components","description":"Replace AudioCleanupTimer, ExperienceAudioCleanupTimer, LootAudioCleanupTimer with generic CleanupTimer { timer: Timer, cleanup_type: CleanupType }. Create CleanupType enum with Audio, Experience, Loot variants. Update systems in audio, experience, loot modules.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.50933+11:00","updated_at":"2025-12-25T17:42:02.50933+11:00","dependencies":[{"issue_id":"dt-survivor-ubg","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:42:19.955527+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-ubg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.259164+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-whr","title":"Create combat systems","description":"Create src/combat/systems.rs with: apply_damage (reads DamageEvent, updates Health, fires DeathEvent), check_death (monitors Health \u003c= 0), handle_invincibility (ticks invincibility timers). Include tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.720944+11:00","updated_at":"2025-12-25T18:04:44.3668+11:00","closed_at":"2025-12-25T18:04:44.3668+11:00","dependencies":[{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-y2f","type":"blocks","created_at":"2025-12-25T17:40:45.203649+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-1wg","type":"blocks","created_at":"2025-12-25T17:40:45.294286+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.856432+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-xp9","title":"Create CombatPlugin","description":"Create src/combat/plugin.rs with CombatPlugin that registers events, systems with run_if(in_state(GameState::InGame)). Add to main.rs plugin list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.836415+11:00","updated_at":"2025-12-25T18:09:47.843379+11:00","closed_at":"2025-12-25T18:09:47.843379+11:00","dependencies":[{"issue_id":"dt-survivor-xp9","depends_on_id":"dt-survivor-whr","type":"blocks","created_at":"2025-12-25T17:40:45.37134+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-xp9","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.93232+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-y2f","title":"Create Health, Damage, Hitbox components","description":"Create reusable combat components in src/combat/components.rs: Health { current: f32, max: f32 } with take_damage/is_dead methods, Damage(f32) for projectiles, Hitbox(f32) for collision radius, Invincibility(Timer) for damage immunity frames. Include unit tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.501006+11:00","updated_at":"2025-12-25T17:57:55.248747+11:00","closed_at":"2025-12-25T17:57:55.248747+11:00","dependencies":[{"issue_id":"dt-survivor-y2f","depends_on_id":"dt-survivor-1a7","type":"blocks","created_at":"2025-12-25T17:40:45.036797+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-y2f","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.696396+11:00","created_by":"daemon"}]}
