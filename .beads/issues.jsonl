{"id":"dt-survivor-0ql","title":"Convert player and rock spawning from Sprite to Mesh3d cubes","description":"# Task: Player and Rock 3D Spawning\n\n## Context\nDT Survivor is migrating from 2D to 3D. The player and decorative rocks currently use `Sprite::from_color()` and need to be converted to 3D cube meshes. This task depends on GameMeshes/GameMaterials resources being available.\n\n## Current Implementation\n**Player** (`src/game/systems.rs:43-56`):\n```rust\ncommands.spawn((\n    Sprite::from_color(Color::srgb(0.0, 1.0, 0.0), Vec2::new(20.0, 20.0)),\n    Transform::from_translation(Vec3::new(0.0, 0.0, 1.0)),\n    Player { speed: 200.0, regen_rate: 1.0, pickup_radius: 50.0 },\n    Health::new(100.0),\n    PlayerExperience { current: 0, level: 1 },\n));\n```\n\n**Rocks** (`src/game/systems.rs:60-68`):\n```rust\ncommands.spawn((\n    Sprite::from_color(Color::srgb(0.5, 0.5, 0.5), Vec2::new(size, size)),\n    Transform::from_translation(Vec3::new(x, y, 0.0)),\n    Rock,\n));\n```\n\n## Required Changes\n\n### 1. Update Player Spawning\n```rust\ncommands.spawn((\n    Mesh3d(game_meshes.player.clone()),\n    MeshMaterial3d(game_materials.player.clone()),\n    Transform::from_translation(Vec3::new(0.0, 0.5, 0.0)), // Y=0.5 sits on ground\n    Player { speed: 200.0, regen_rate: 1.0, pickup_radius: 50.0 },\n    Health::new(100.0),\n    PlayerExperience { current: 0, level: 1 },\n));\n```\n\n### 2. Update Rock Spawning\n```rust\nfor _ in 0..15 {\n    let x = rng.gen_range(-40.0..40.0);  // Adjusted for 3D scale\n    let z = rng.gen_range(-30.0..30.0);  // Note: Y becomes Z\n    commands.spawn((\n        Mesh3d(game_meshes.rock.clone()),\n        MeshMaterial3d(game_materials.rock.clone()),\n        Transform::from_translation(Vec3::new(x, 0.25, z)), // Y=0.25 (half height)\n        Rock,\n    ));\n}\n```\n\n### 3. Update System Signature\nAdd resource parameters to access shared meshes/materials:\n```rust\npub fn setup_game(\n    mut commands: Commands,\n    camera_query: Query\u003cEntity, With\u003cCamera\u003e\u003e,\n    game_meshes: Res\u003cGameMeshes\u003e,\n    game_materials: Res\u003cGameMaterials\u003e,\n) { ... }\n```\n\n## Testing Requirements\n- Unit test: Player spawns with Mesh3d component\n- Unit test: Player spawns with MeshMaterial3d component\n- Unit test: Player transform Y position is 0.5 (sitting on ground)\n- Unit test: Rocks spawn with Mesh3d component\n- Unit test: Rocks spawn on XZ plane (Y=0.25)\n- Unit test: Rocks no longer use Z for layering\n- Update existing player spawn tests for 3D components\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Player renders as green 3D cube\n- [ ] Player positioned at Y=0.5 (half cube height above ground)\n- [ ] Rocks render as grey 3D cubes\n- [ ] Rocks positioned on XZ plane with appropriate Y offset\n- [ ] Rock spawn range adjusted for 3D world scale\n- [ ] No Sprite components remain in player/rock spawning\n- [ ] All existing player tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:31.034521+11:00","updated_at":"2025-12-28T10:07:49.036083+11:00","closed_at":"2025-12-28T10:07:49.036083+11:00","dependencies":[{"issue_id":"dt-survivor-0ql","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.307103+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-0ql","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.29717+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1a7","title":"Create combat module structure","description":"Create src/combat/ module with mod.rs, components.rs, events.rs, systems.rs, plugin.rs. This is the foundation for unified combat handling. Files: src/combat/mod.rs (with re-exports), src/lib.rs (add pub mod combat).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.385295+11:00","updated_at":"2025-12-25T17:55:30.171884+11:00","closed_at":"2025-12-25T17:55:30.171884+11:00","dependencies":[{"issue_id":"dt-survivor-1a7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.617448+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1ac","title":"Whisper 3D conversion blocked - document requirements","description":"The whisper module 3D conversion (dt-survivor-rfz) requires extensive changes:\n\n1. Remove bevy_lit 2D dependencies (PointLight2d -\u003e PointLight)\n2. Convert Mesh2d/MeshMaterial2d to Mesh3d/MeshMaterial3d\n3. Replace custom additive materials with StandardMaterial+emissive\n4. Convert XY coordinates to XZ for ground plane\n5. Update bevy_hanabi particle axes (Z-\u003eY)\n6. Update ~1800 lines of code and tests\n\nThis task should be done after other 3D conversions are complete to have working patterns to follow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T10:40:41.14733+11:00","updated_at":"2025-12-28T10:41:47.946497+11:00","closed_at":"2025-12-28T10:41:47.946497+11:00","dependencies":[{"issue_id":"dt-survivor-1ac","depends_on_id":"dt-survivor-rfz","type":"discovered-from","created_at":"2025-12-28T10:40:41.148443+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1j2","title":"Create movement systems","description":"Create src/movement/systems.rs with: apply_velocity (updates Transform from Velocity), apply_knockback (applies and decays knockback). Move player_movement from game/systems.rs, enemy_movement_system from enemies/systems.rs. Include tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.59513+11:00","updated_at":"2025-12-25T19:26:55.753582+11:00","closed_at":"2025-12-25T19:26:55.753582+11:00","dependencies":[{"issue_id":"dt-survivor-1j2","depends_on_id":"dt-survivor-e9f","type":"blocks","created_at":"2025-12-25T17:41:45.262226+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-1j2","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.958906+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-1wg","title":"Create DamageEvent and DeathEvent","description":"Create combat events in src/combat/events.rs: DamageEvent { target: Entity, amount: f32, source: Option\u003cEntity\u003e }, DeathEvent { entity: Entity, position: Vec3, entity_type: EntityType }. Move existing EnemyDeathEvent logic to use these unified events.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.612206+11:00","updated_at":"2025-12-25T17:58:22.468784+11:00","closed_at":"2025-12-25T17:58:22.468784+11:00","dependencies":[{"issue_id":"dt-survivor-1wg","depends_on_id":"dt-survivor-1a7","type":"blocks","created_at":"2025-12-25T17:40:45.118858+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-1wg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.776952+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-3z7","title":"Create MovementPlugin","description":"Create src/movement/plugin.rs with MovementPlugin that registers systems with run_if(in_state(GameState::InGame)).in_set(GameSet::Movement). Update game/plugin.rs to delegate movement systems.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.704911+11:00","updated_at":"2025-12-25T19:29:18.168215+11:00","closed_at":"2025-12-25T19:29:18.168215+11:00","dependencies":[{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-1j2","type":"blocks","created_at":"2025-12-25T17:41:45.36079+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:41:45.449523+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-3z7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.047496+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-45y","title":"Run full test suite and fix regressions","description":"After all refactoring is complete, run cargo test to verify all tests pass. Run cargo clippy to fix any warnings. Ensure 90% code coverage is maintained. Fix any regressions introduced during refactoring.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:42:02.902028+11:00","updated_at":"2025-12-25T20:11:20.85134+11:00","closed_at":"2025-12-25T20:11:20.85134+11:00","dependencies":[{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-f77","type":"blocks","created_at":"2025-12-25T17:42:20.284677+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-70v","type":"blocks","created_at":"2025-12-25T17:42:20.363162+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:42:20.446812+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-3z7","type":"blocks","created_at":"2025-12-25T17:42:20.531606+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-cch","type":"blocks","created_at":"2025-12-25T17:42:20.60702+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-8hu","type":"blocks","created_at":"2025-12-25T17:42:20.683525+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-6x9","type":"blocks","created_at":"2025-12-25T17:42:20.766376+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-8s7","type":"blocks","created_at":"2025-12-25T17:42:20.842823+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-ubg","type":"blocks","created_at":"2025-12-25T17:42:20.92369+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-7m0","type":"blocks","created_at":"2025-12-25T17:42:21.009282+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-d0t","type":"blocks","created_at":"2025-12-25T17:42:21.093144+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-45y","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.497406+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-4i1","title":"Update movement systems from XY to XZ plane","description":"# Task: Movement System XYâ†’XZ Conversion\n\n## Context\nDT Survivor is migrating from 2D to 3D. All movement currently operates on the XY plane with Z used for layering. Movement must be converted to XZ plane with Y as the up axis (Bevy's default 3D coordinate system).\n\n## Current Implementation\n**Velocity Application** (`src/movement/systems.rs:10-15`):\n```rust\npub fn apply_velocity(mut query: Query\u003c(\u0026mut Transform, \u0026Velocity)\u003e, time: Res\u003cTime\u003e) {\n    for (mut transform, velocity) in query.iter_mut() {\n        let movement = velocity.value() * time.delta_secs();\n        transform.translation += movement.extend(0.0); // XY plane\n    }\n}\n```\n\n**Knockback** (`src/movement/systems.rs:19-37`): Uses Vec2 direction applied to XY\n\n**Enemy Movement** (`src/movement/systems.rs:84-100`):\n```rust\nlet direction = (player_pos - enemy_pos).normalize();\ntransform.translation += Vec3::new(direction.x, direction.y, 0.0) * speed * dt;\n```\n\n## Required Changes\n\n### 1. Create XZ Helper Function\nAdd to `src/movement/components.rs` or a new `utils.rs`:\n```rust\n/// Convert 2D vector to 3D XZ plane movement (Y=0)\npub fn to_xz(v: Vec2) -\u003e Vec3 {\n    Vec3::new(v.x, 0.0, v.y)\n}\n\n/// Extract XZ coordinates from 3D position as Vec2\npub fn from_xz(v: Vec3) -\u003e Vec2 {\n    Vec2::new(v.x, v.z)\n}\n```\n\n### 2. Update apply_velocity System\n```rust\npub fn apply_velocity(mut query: Query\u003c(\u0026mut Transform, \u0026Velocity)\u003e, time: Res\u003cTime\u003e) {\n    for (mut transform, velocity) in query.iter_mut() {\n        let movement = velocity.value() * time.delta_secs();\n        transform.translation += to_xz(movement); // XZ plane\n    }\n}\n```\n\n### 3. Update apply_knockback System\n```rust\n// Before\ntransform.translation += direction.extend(0.0) * force * dt;\n\n// After\ntransform.translation += to_xz(direction * force * dt);\n```\n\n### 4. Update enemy_movement_system\n```rust\npub fn enemy_movement_system(\n    mut query: Query\u003c(\u0026mut Transform, \u0026Enemy)\u003e,\n    player_position: Res\u003cPlayerPosition\u003e,\n    time: Res\u003cTime\u003e,\n) {\n    let player_pos = player_position.0; // Already Vec2, represents XZ\n    for (mut transform, enemy) in query.iter_mut() {\n        let enemy_pos = from_xz(transform.translation);\n        let direction = (player_pos - enemy_pos).normalize_or_zero();\n        transform.translation += to_xz(direction * enemy.speed * time.delta_secs());\n    }\n}\n```\n\n### 5. Update PlayerPosition Resource\nThe `PlayerPosition` resource stores `Vec2`. Ensure it represents XZ coordinates:\n```rust\n// When updating PlayerPosition\nplayer_position.0 = Vec2::new(player_transform.translation.x, player_transform.translation.z);\n```\n\n## Testing Requirements\n- Unit test: to_xz converts Vec2 to Vec3 with Y=0\n- Unit test: from_xz extracts X and Z as Vec2\n- Unit test: apply_velocity moves entities on XZ plane\n- Unit test: Entity Y position unchanged after velocity application\n- Unit test: apply_knockback works on XZ plane\n- Unit test: enemy_movement_system moves toward player on XZ\n- Unit test: PlayerPosition updated correctly\n- Update all existing movement tests\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] to_xz and from_xz helper functions implemented\n- [ ] apply_velocity system uses XZ plane\n- [ ] apply_knockback system uses XZ plane\n- [ ] enemy_movement_system chases player on XZ plane\n- [ ] Entity Y positions unchanged by movement systems\n- [ ] PlayerPosition resource stores XZ coordinates\n- [ ] All movement tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:17.486913+11:00","updated_at":"2025-12-28T10:04:41.014515+11:00","closed_at":"2025-12-28T10:04:41.014515+11:00","dependencies":[{"issue_id":"dt-survivor-4i1","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.567746+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-4i1","depends_on_id":"dt-survivor-nq8","type":"blocks","created_at":"2025-12-28T09:50:36.792265+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-4w1","title":"Fix failing tests in bullets and game modules","description":"Six tests are currently failing: test_bullet_collision_detection, test_bullet_collision_no_collision (panic in run_main), and four tests in game::systems::tests related to player-enemy collision damage (test_player_enemy_collision_immediate_damage, test_player_enemy_collision_damage_cooldown, test_player_death_on_zero_health, test_damage_timer_reset_when_not_touching). These failures appear to be pre-existing issues with the collision/damage systems.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T18:04:53.402234+11:00","updated_at":"2025-12-25T18:17:15.454951+11:00","closed_at":"2025-12-25T18:17:15.454951+11:00"}
{"id":"dt-survivor-6q4","title":"Create movement module structure","description":"Create src/movement/ module with mod.rs, components.rs, systems.rs, plugin.rs. This consolidates movement logic from game and enemies modules. Add pub mod movement to lib.rs and movement_plugin to main.rs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.367885+11:00","updated_at":"2025-12-25T19:11:47.207461+11:00","closed_at":"2025-12-25T19:11:47.207461+11:00","dependencies":[{"issue_id":"dt-survivor-6q4","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.790851+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-6x9","title":"Centralize event registration","description":"Fix event registration redundancy. EnemyDeathEvent currently registered in game/plugin.rs, enemy_death/plugin.rs, and laser tests. Centralize: combat/plugin.rs owns DamageEvent/DeathEvent, game/plugin.rs owns collision events, loot/plugin.rs owns pickup events. Remove duplicates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:30.051186+11:00","updated_at":"2025-12-25T19:46:30.827015+11:00","closed_at":"2025-12-25T19:46:30.827015+11:00","dependencies":[{"issue_id":"dt-survivor-6x9","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:41:45.611306+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-6x9","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.311655+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-70v","title":"Extract Player health to Health component","description":"Refactor src/player/components.rs: remove health, max_health from Player struct. Modify player spawn to attach separate Health component. Update player_health_regeneration_system and damage systems to use Health component. Keeps regen_rate in Player.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:29.062224+11:00","updated_at":"2025-12-25T18:52:17.946578+11:00","closed_at":"2025-12-25T18:52:17.946578+11:00","dependencies":[{"issue_id":"dt-survivor-70v","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:40:45.536817+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-70v","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:46.097014+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-78g","title":"Fix failing integration tests in main.rs due to missing ActivePowerups resource","description":"Eight integration tests in main.rs are failing because the ActivePowerups resource is not initialized. Tests failing: test_weapon_firing_spawns_bullets, test_scoring_integration_full_flow, test_scoring_integration_multiple_enemies, test_scoring_integration_score_persistence, test_weapon_equipped_to_player, test_weapon_slots_ui_created, test_no_blank_screen_during_transitions, test_camera_reuse_across_state_transitions. The system donny_tango_survivor::loot::systems::apply_item_effects requires ResMut\u003cActivePowerups\u003e but the resource doesn't exist in the test app context.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-25T18:17:08.650091+11:00","updated_at":"2025-12-25T18:20:50.690287+11:00","closed_at":"2025-12-25T18:20:50.690287+11:00","dependencies":[{"issue_id":"dt-survivor-78g","depends_on_id":"dt-survivor-4w1","type":"discovered-from","created_at":"2025-12-25T18:17:08.652038+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-7gg","title":"Configure SystemSet ordering in plugin","description":"Update src/game/plugin.rs to configure set ordering: app.configure_sets(Update, (GameSet::Input, GameSet::Movement, GameSet::Combat, GameSet::Spawning, GameSet::Effects, GameSet::Cleanup).chain()). Assign existing systems to appropriate sets using .in_set().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:02.078328+11:00","updated_at":"2025-12-25T19:03:36.681675+11:00","closed_at":"2025-12-25T19:03:36.681675+11:00","dependencies":[{"issue_id":"dt-survivor-7gg","depends_on_id":"dt-survivor-bem","type":"blocks","created_at":"2025-12-25T17:41:10.264016+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-7gg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:10.503212+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-7m0","title":"Use WeaponType enum in UI components","description":"Update src/ui/components.rs: change WeaponIcon { weapon_type: String } to WeaponIcon { weapon_type: WeaponType }. Same for WeaponLevelDisplay. Update UI systems to use enum matching instead of string comparison. Improves type safety.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.620929+11:00","updated_at":"2025-12-25T20:06:53.533998+11:00","closed_at":"2025-12-25T20:06:53.533998+11:00","dependencies":[{"issue_id":"dt-survivor-7m0","depends_on_id":"dt-survivor-cch","type":"blocks","created_at":"2025-12-25T17:42:20.034756+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-7m0","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.337279+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8af","title":"Debug test_weapon_equipped_to_player failure after whisper 3D conversion","description":"When converting whisper module to 3D, the main.rs integration test test_weapon_equipped_to_player fails with 'Should have no weapon entities until Whisper is collected' (left: 1, right: 0). The failure is caused by changes in systems.rs but the exact cause was not identified. Need to investigate what in the whisper systems changes causes a Weapon entity to be spawned during game initialization.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-28T11:01:11.085495+11:00","updated_at":"2025-12-28T11:01:11.085495+11:00","dependencies":[{"issue_id":"dt-survivor-8af","depends_on_id":"dt-survivor-rfz","type":"blocks","created_at":"2025-12-28T11:01:11.086002+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8hu","title":"Complete loot module migration","description":"Remove legacy code from loot module: delete LootItem component, remove loot_spawning_system, loot_attraction_system, loot_movement_system. Keep new ECS-based systems: detect_pickup_collisions, update_item_attraction, apply_item_effects. Update loot/plugin.rs registrations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.937241+11:00","updated_at":"2025-12-25T19:42:41.321373+11:00","closed_at":"2025-12-25T19:42:41.321373+11:00","dependencies":[{"issue_id":"dt-survivor-8hu","depends_on_id":"dt-survivor-f77","type":"blocks","created_at":"2025-12-25T17:41:45.704476+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-8hu","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.214775+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8i6","title":"Convert rocket launcher and explosions to 3D","description":"# Task: Rocket Launcher 3D Conversion\n\n## Context\nDT Survivor is migrating from 2D to 3D. The rocket launcher fires rockets that explode on impact, both rendered as sprites. These need to be converted to 3D geometry.\n\n## Current Implementation\n**Rocket Spawning** (`src/rocket_launcher/systems.rs`):\n- Rockets use `Sprite::from_color()` with color-changing animation\n- Size: 12x6 pixels (elongated for rocket shape)\n- Direction-based rotation\n- Velocity on XY plane\n\n**Explosion Effect**:\n- Expanding circle sprite\n- Red/orange color\n- Damages enemies within radius\n\n## Required Changes\n\n### 1. Replace Rocket Sprite with 3D Mesh\n```rust\n// Before\ncommands.spawn((\n    Sprite::from_color(color, Vec2::new(12.0, 6.0)),\n    Transform { rotation, translation, .. },\n    Rocket { ... },\n));\n\n// After\ncommands.spawn((\n    Mesh3d(meshes.add(Cuboid::new(0.3, 0.15, 0.6))), // Elongated cube\n    MeshMaterial3d(materials.add(StandardMaterial {\n        base_color: Color::srgb(1.0, 0.5, 0.0), // Orange\n        emissive: LinearRgba::rgb(1.0, 0.3, 0.0),\n        ..default()\n    })),\n    Transform {\n        translation: Vec3::new(player_pos.x, 0.5, player_pos.z),\n        rotation: rotation_y,\n        ..default()\n    },\n    Rocket { direction, speed, lifetime },\n));\n```\n\n### 2. Update Rocket Movement\nConvert from XY to XZ plane:\n```rust\n// Before\ntransform.translation += rocket.direction.extend(0.0) * speed * dt;\n\n// After\nlet movement = rocket.direction * speed * dt;\ntransform.translation += Vec3::new(movement.x, 0.0, movement.y);\n```\n\n### 3. Update Rocket Rotation\nRotate around Y axis to face direction of travel:\n```rust\nlet angle = rocket.direction.y.atan2(rocket.direction.x);\ntransform.rotation = Quat::from_rotation_y(-angle + std::f32::consts::FRAC_PI_2);\n```\n\n### 4. Replace Explosion Sprite with 3D Effect\nOption A: Expanding sphere mesh\n```rust\ncommands.spawn((\n    Mesh3d(meshes.add(Sphere::new(0.1))),\n    MeshMaterial3d(materials.add(StandardMaterial {\n        base_color: Color::srgba(1.0, 0.3, 0.0, 0.8),\n        emissive: LinearRgba::rgb(2.0, 0.5, 0.0),\n        alpha_mode: AlphaMode::Blend,\n        ..default()\n    })),\n    Transform::from_translation(explosion_pos),\n    Explosion { radius: 0.0, max_radius: 3.0, expansion_rate: 10.0 },\n));\n```\n\nOption B: Particle burst (more dramatic)\n```rust\n// Use bevy_hanabi for explosion particles\n// Orange/red burst expanding outward\n```\n\n### 5. Update Explosion Expansion\n```rust\nfn expand_explosions(\n    mut query: Query\u003c(\u0026mut Transform, \u0026mut Explosion)\u003e,\n    time: Res\u003cTime\u003e,\n) {\n    for (mut transform, mut explosion) in query.iter_mut() {\n        explosion.radius += explosion.expansion_rate * time.delta_secs();\n        let scale = explosion.radius / explosion.max_radius;\n        transform.scale = Vec3::splat(explosion.max_radius * scale);\n        \n        if explosion.radius \u003e= explosion.max_radius {\n            // Despawn or fade out\n        }\n    }\n}\n```\n\n### 6. Update Rocket Targeting\nDirection calculation to nearest enemy:\n```rust\nlet rocket_xz = Vec2::new(rocket_pos.x, rocket_pos.z);\nlet enemy_xz = Vec2::new(enemy_pos.x, enemy_pos.z);\nlet direction = (enemy_xz - rocket_xz).normalize();\n```\n\n## Testing Requirements\n- Unit test: Rocket spawns with Mesh3d component\n- Unit test: Rocket movement on XZ plane\n- Unit test: Rocket rotation faces movement direction\n- Unit test: Explosion spawns on rocket impact\n- Unit test: Explosion expands correctly\n- Unit test: Explosion damages enemies in radius\n- Unit test: Explosion radius check uses XZ coordinates\n- Update existing rocket tests for 3D\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Rockets render as 3D elongated cubes\n- [ ] Rockets move on XZ plane\n- [ ] Rockets rotate to face direction\n- [ ] Explosions render as 3D spheres or particles\n- [ ] Explosion expansion works in 3D\n- [ ] Explosion damage radius works on XZ plane\n- [ ] No Sprite components in rocket/explosion\n- [ ] All rocket tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:22.269968+11:00","updated_at":"2025-12-28T10:44:36.700489+11:00","closed_at":"2025-12-28T10:44:36.700489+11:00","dependencies":[{"issue_id":"dt-survivor-8i6","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.964123+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-8i6","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.626564+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-8s7","title":"Add GameOverEvent","description":"Create GameOverEvent in src/game/events.rs with final_score: u32, survival_time: f32. Update player_death_system to fire event before state transition. UI and audio systems can listen for this event. Decouples game over handling from direct state manipulation.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.391996+11:00","updated_at":"2025-12-25T19:53:22.892474+11:00","closed_at":"2025-12-25T19:53:22.892474+11:00","dependencies":[{"issue_id":"dt-survivor-8s7","depends_on_id":"dt-survivor-1wg","type":"blocks","created_at":"2025-12-25T17:42:19.872421+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-8s7","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.170925+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-a2s","title":"Convert enemy spawning from Sprite to Mesh3d cubes","description":"# Task: Enemy 3D Spawning\n\n## Context\nDT Survivor is migrating from 2D to 3D. Enemies currently spawn as red sprites and need to be converted to 3D cube meshes. Spawn positions must be converted from XY plane to XZ plane.\n\n## Current Implementation\n**Enemy Spawning** (`src/enemies/systems.rs:11-83`):\n```rust\ncommands.spawn((\n    Sprite::from_color(Color::srgb(1.0, 0.0, 0.0), Vec2::new(15.0, 15.0)),\n    Transform::from_translation(Vec3::new(spawn_pos.x, spawn_pos.y, 0.5)),\n    Enemy { speed: 50.0, strength: 10.0 },\n    Health::new(10.0),\n    CheckDeath,\n));\n```\n\nSpawn position is calculated at 600+ units from player using angle/distance on XY plane.\n\n## Required Changes\n\n### 1. Update Enemy Spawn Position Calculation\nConvert from XY to XZ plane:\n```rust\n// Before\nlet spawn_pos = Vec2::new(\n    player_pos.x + angle.cos() * distance,\n    player_pos.y + angle.sin() * distance,\n);\n\n// After\nlet spawn_x = player_pos.x + angle.cos() * distance;\nlet spawn_z = player_pos.y + angle.sin() * distance; // Y becomes Z in 3D\nlet spawn_pos = Vec3::new(spawn_x, 0.375, spawn_z); // Y=0.375 (half of 0.75 cube)\n```\n\n### 2. Update Enemy Spawning\n```rust\ncommands.spawn((\n    Mesh3d(game_meshes.enemy.clone()),\n    MeshMaterial3d(game_materials.enemy.clone()),\n    Transform::from_translation(spawn_pos),\n    Enemy { speed: 50.0, strength: 10.0 },\n    Health::new(10.0),\n    CheckDeath,\n));\n```\n\n### 3. Update System Signature\n```rust\npub fn spawn_enemy(\n    mut commands: Commands,\n    time: Res\u003cTime\u003e,\n    mut spawn_timer: ResMut\u003cEnemySpawnTimer\u003e,\n    player_position: Res\u003cPlayerPosition\u003e,\n    game_meshes: Res\u003cGameMeshes\u003e,\n    game_materials: Res\u003cGameMaterials\u003e,\n) { ... }\n```\n\n### 4. Adjust Spawn Distance for 3D Scale\nThe spawn distance (600 units) may need adjustment for the new 3D scale. Consider reducing to ~60 units if world scale changes.\n\n## Testing Requirements\n- Unit test: Enemy spawns with Mesh3d component\n- Unit test: Enemy spawns with MeshMaterial3d component\n- Unit test: Enemy transform Y position is 0.375 (half cube height)\n- Unit test: Enemy spawn position is on XZ plane (not XY)\n- Unit test: Spawn distance from player is correct\n- Unit test: Spawn angle distribution is uniform around player\n- Update existing enemy spawn tests for 3D coordinates\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Enemies render as red 3D cubes\n- [ ] Enemies spawn on XZ plane at appropriate Y height\n- [ ] Spawn positions calculated correctly in 3D space\n- [ ] Enemy speed and strength unchanged\n- [ ] Health and CheckDeath components still attached\n- [ ] No Sprite components in enemy spawning\n- [ ] All existing enemy tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:32.257852+11:00","updated_at":"2025-12-28T10:09:40.364142+11:00","closed_at":"2025-12-28T10:09:40.364142+11:00","dependencies":[{"issue_id":"dt-survivor-a2s","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.371959+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-a2s","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.36709+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-b67","title":"Convert bullet spawning from Sprite to Mesh3d cubes","description":"# Task: Bullet 3D Spawning\n\n## Context\nDT Survivor is migrating from 2D to 3D. Bullets (projectiles) currently spawn as yellow sprites and need to be converted to 3D cube meshes. Bullet direction is stored as Vec2 and used for XY movement - this needs to work with XZ plane instead.\n\n## Current Implementation\n**Bullet Spawning** (`src/bullets/systems.rs:24-106`):\n```rust\ncommands.spawn((\n    Sprite::from_color(Color::srgb(1.0, 1.0, 0.0), Vec2::new(8.0, 8.0)),\n    Transform::from_translation(player_transform.translation + Vec3::new(0.0, 0.0, 0.1)),\n    Bullet {\n        direction: direction,  // Vec2\n        speed: 200.0,\n        lifetime: Timer::from_seconds(15.0, TimerMode::Once),\n    },\n));\n```\n\n**Bullet Movement** (`src/bullets/systems.rs:108-116`):\n```rust\nlet movement = bullet.direction * bullet.speed * time.delta_secs();\ntransform.translation += movement.extend(0.0); // XY movement\n```\n\n## Required Changes\n\n### 1. Update Bullet Spawning\n```rust\ncommands.spawn((\n    Mesh3d(game_meshes.bullet.clone()),\n    MeshMaterial3d(game_materials.bullet.clone()),\n    Transform::from_translation(Vec3::new(\n        player_transform.translation.x,\n        0.5, // Same height as player center\n        player_transform.translation.z,\n    )),\n    Bullet {\n        direction: direction,  // Still Vec2, but represents XZ\n        speed: 200.0,\n        lifetime: Timer::from_seconds(15.0, TimerMode::Once),\n    },\n));\n```\n\n### 2. Update Bullet Movement System\n```rust\npub fn bullet_movement_system(\n    mut query: Query\u003c(\u0026mut Transform, \u0026Bullet)\u003e,\n    time: Res\u003cTime\u003e,\n) {\n    for (mut transform, bullet) in query.iter_mut() {\n        let movement = bullet.direction * bullet.speed * time.delta_secs();\n        // Convert Vec2 to XZ plane movement\n        transform.translation += Vec3::new(movement.x, 0.0, movement.y);\n    }\n}\n```\n\n### 3. Update Direction Calculation\nWhen calculating direction to nearest enemy:\n```rust\n// Before\nlet direction = (enemy_pos.truncate() - player_pos.truncate()).normalize();\n\n// After\nlet enemy_xz = Vec2::new(enemy_pos.x, enemy_pos.z);\nlet player_xz = Vec2::new(player_pos.x, player_pos.z);\nlet direction = (enemy_xz - player_xz).normalize();\n```\n\n### 4. Update Collision Detection\nBullet-enemy collision in `check_bullet_enemy_collision`:\n```rust\n// Before\nlet bullet_pos = bullet_transform.translation.truncate();\nlet enemy_pos = enemy_transform.translation.truncate();\n\n// After\nlet bullet_pos = Vec2::new(bullet_transform.translation.x, bullet_transform.translation.z);\nlet enemy_pos = Vec2::new(enemy_transform.translation.x, enemy_transform.translation.z);\n```\n\n## Testing Requirements\n- Unit test: Bullet spawns with Mesh3d component\n- Unit test: Bullet spawns at player XZ position with correct Y height\n- Unit test: Bullet direction Vec2 represents XZ plane correctly\n- Unit test: Bullet movement applies to X and Z axes (not X and Y)\n- Unit test: Bullet-enemy collision detection works on XZ plane\n- Unit test: Bullet spread pattern works in 3D\n- Update existing bullet tests for 3D coordinates\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Bullets render as yellow 3D cubes (small, 0.3 size)\n- [ ] Bullets spawn at player's XZ position\n- [ ] Bullets move on XZ plane (Y stays constant)\n- [ ] Bullet direction targets enemies correctly in 3D\n- [ ] Bullet-enemy collisions detected on XZ plane\n- [ ] Bullet spread pattern functional\n- [ ] Bullet lifetime and despawning unchanged\n- [ ] No Sprite components in bullet spawning\n- [ ] All existing bullet tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:32.415016+11:00","updated_at":"2025-12-28T10:16:30.709385+11:00","closed_at":"2025-12-28T10:16:30.709385+11:00","dependencies":[{"issue_id":"dt-survivor-b67","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.438418+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-b67","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.433042+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-bem","title":"Create GameSet SystemSets","description":"Add SystemSets for explicit system ordering in src/game/sets.rs (or systems.rs): GameSet enum with Input, Movement, Combat, Spawning, Effects, Cleanup variants. Derive SystemSet, Debug, Clone, PartialEq, Eq, Hash. Export from game module.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:01.959314+11:00","updated_at":"2025-12-25T18:56:32.52717+11:00","closed_at":"2025-12-25T18:56:32.52717+11:00","dependencies":[{"issue_id":"dt-survivor-bem","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:41:10.341444+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-bem","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:10.420985+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-cch","title":"Populate weapon plugin with systems","description":"Move weapon systems from src/game/plugin.rs to src/weapon/plugin.rs: weapon_firing_system, weapon_follow_player_system. Update game/plugin.rs to add WeaponPlugin as sub-plugin. Currently weapon/plugin.rs is an empty stub.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.82361+11:00","updated_at":"2025-12-25T19:32:50.913061+11:00","closed_at":"2025-12-25T19:32:50.913061+11:00","dependencies":[{"issue_id":"dt-survivor-cch","depends_on_id":"dt-survivor-7gg","type":"blocks","created_at":"2025-12-25T17:41:45.529638+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-cch","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:46.130346+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-cq2","title":"Add bevy_lit and bevy_hanabi dependencies for Whisper visual effects","description":"Add the following dependencies to Cargo.toml for advanced Whisper visual effects:\n- bevy_lit 0.9 for 2D lighting (PointLight2d)\n- bevy_hanabi 0.17 for GPU particle effects\n\nThese are needed to implement the full lightning ball visual effect for Whisper.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:17:14.884699+11:00","updated_at":"2025-12-26T09:19:21.840097+11:00","closed_at":"2025-12-26T09:19:21.840097+11:00"}
{"id":"dt-survivor-d0t","title":"Expand prelude.rs with new modules","description":"Update src/prelude.rs to include commonly used types from new modules: pub use crate::combat::*; pub use crate::movement::*; pub use crate::weapon::WeaponType;. Keeps imports convenient across codebase.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.74856+11:00","updated_at":"2025-12-25T20:09:58.443274+11:00","closed_at":"2025-12-25T20:09:58.443274+11:00","dependencies":[{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:42:20.114365+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-3z7","type":"blocks","created_at":"2025-12-25T17:42:20.201006+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-d0t","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.416994+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-e2t","title":"Final integration testing and cleanup for 3D migration","description":"# Task: 3D Migration Integration Testing\n\n## Context\nThis is the final task in the 2D to 3D migration. After all individual components have been converted, this task verifies the complete system works together and cleans up any remaining 2D artifacts.\n\n## Prerequisites\nAll other migration tasks must be complete:\n- Camera and lighting infrastructure\n- Shared mesh/material resources\n- All entity spawning (player, enemies, bullets, loot)\n- Movement systems XZ conversion\n- Camera follow system\n- Mouse input ray casting\n- Collision detection\n- Whisper particle replacement\n- Laser 3D conversion\n- Rocket/explosion 3D conversion\n\n## Required Changes\n\n### 1. Remove All 2D Dependencies\nVerify no remaining usage of:\n- `Sprite` or `SpriteBundle`\n- `Camera2d` or `Camera2dBundle`\n- `Mesh2d` or `MeshMaterial2d`\n- `Material2d` trait implementations\n- `viewport_to_world_2d`\n- `.truncate()` for XY extraction (should be XZ)\n- `.extend(0.0)` for XY movement (should be XZ)\n\n### 2. Update Cargo.toml\nRemove unused 2D dependencies if applicable:\n- `bevy_lit` (2D lighting - already removed from plugin)\n- Any 2D-specific feature flags\n\n### 3. Clean Up Shader Files\nIf Whisper 2D shaders are no longer used, remove:\n- `assets/shaders/additive_textured.wgsl`\n- `assets/shaders/additive_color.wgsl`\n\nOr keep them marked as deprecated if they might be ported to 3D later.\n\n### 4. Integration Tests\n\n**Full Game Loop Test**:\n```rust\n#[test]\nfn test_game_runs_in_3d() {\n    let mut app = App::new();\n    // Add all plugins\n    // Verify game starts without panic\n    // Verify camera is Camera3d\n    // Verify entities have Mesh3d components\n}\n```\n\n**Gameplay Integration Tests**:\n- Player can move in 3D world\n- Enemies spawn and chase player\n- Bullets fire and hit enemies\n- Loot drops and can be picked up\n- All weapons function (pistol, laser, rocket, whisper)\n- Camera follows player correctly\n- Collisions detected properly\n\n### 5. Visual Verification Checklist\nRun the game and verify:\n- [ ] Ground plane visible\n- [ ] Player cube visible and controllable\n- [ ] Enemies spawn as red cubes around player\n- [ ] Bullets fire as yellow cubes toward enemies\n- [ ] Loot drops when enemies die\n- [ ] Laser beam renders correctly\n- [ ] Rockets fire and explode\n- [ ] Whisper particles visible\n- [ ] Camera maintains isometric angle\n- [ ] Lighting illuminates scene properly\n- [ ] HDR bloom still functional\n\n### 6. Performance Verification\n- [ ] Frame rate acceptable (\u003e30 FPS minimum)\n- [ ] No memory leaks from mesh/material creation\n- [ ] Entity count manageable\n\n### 7. Code Cleanup\n- Remove any TODO comments from migration\n- Ensure all tests pass: `make test`\n- Ensure linting passes: `make lint`\n- Update CLAUDE.md if any patterns changed\n\n## Testing Requirements\n- All existing tests pass after migration\n- Integration test for complete game loop\n- Each weapon system verified functional\n- Collision systems verified\n- Camera system verified\n- 90% code coverage maintained\n\n## Acceptance Criteria\n- [ ] No 2D components remain in codebase\n- [ ] Game runs without crashes\n- [ ] All gameplay systems functional in 3D\n- [ ] Visual appearance acceptable (cubes visible, lit, positioned)\n- [ ] Performance acceptable\n- [ ] All tests pass\n- [ ] No linting warnings\n- [ ] Code coverage \u003e= 90%\n- [ ] `make check \u0026\u0026 make lint \u0026\u0026 make test` all pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T09:50:00.104469+11:00","updated_at":"2025-12-28T09:50:00.104469+11:00","dependencies":[{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:34.028625+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-nq8","type":"blocks","created_at":"2025-12-28T09:50:39.848344+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:39.912395+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-0ql","type":"blocks","created_at":"2025-12-28T09:50:39.976026+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-a2s","type":"blocks","created_at":"2025-12-28T09:50:40.041274+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-b67","type":"blocks","created_at":"2025-12-28T09:50:40.108377+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-umn","type":"blocks","created_at":"2025-12-28T09:50:40.172856+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-4i1","type":"blocks","created_at":"2025-12-28T09:50:40.240437+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-ryh","type":"blocks","created_at":"2025-12-28T09:50:40.306979+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-qy4","type":"blocks","created_at":"2025-12-28T09:50:40.372771+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-z7l","type":"blocks","created_at":"2025-12-28T09:50:40.438933+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-rfz","type":"blocks","created_at":"2025-12-28T09:50:40.507864+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-e43","type":"blocks","created_at":"2025-12-28T09:50:40.574685+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e2t","depends_on_id":"dt-survivor-8i6","type":"blocks","created_at":"2025-12-28T09:50:40.642763+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-e43","title":"Convert laser weapon rendering to 3D","description":"# Task: Laser Weapon 3D Conversion\n\n## Context\nDT Survivor is migrating from 2D to 3D. The laser weapon renders as a stretched sprite beam and needs to be converted to 3D geometry (stretched cube or cylinder).\n\n## Current Implementation\n**Laser Spawning** (`src/laser/systems.rs`):\n- Uses `Sprite::from_color()` with cyan color\n- Stretched in one dimension for beam effect\n- Rotated to point from player toward enemies\n- Transform positioned between player and target\n\n## Required Changes\n\n### 1. Replace Sprite with 3D Mesh\n```rust\n// Before\ncommands.spawn((\n    Sprite::from_color(Color::srgb(0.0, 1.0, 1.0), Vec2::new(width, length)),\n    Transform { ... },\n    Laser { ... },\n));\n\n// After\ncommands.spawn((\n    Mesh3d(meshes.add(Cuboid::new(0.1, 0.1, length))), // Thin, long cube\n    MeshMaterial3d(materials.add(StandardMaterial {\n        base_color: Color::srgb(0.0, 1.0, 1.0),\n        emissive: LinearRgba::rgb(0.0, 1.0, 1.0), // Glowing effect\n        ..default()\n    })),\n    Transform {\n        translation: midpoint,\n        rotation: rotation_to_target,\n        ..default()\n    },\n    Laser { ... },\n));\n```\n\n### 2. Update Laser Position Calculation\nConvert from XY to XZ:\n```rust\n// Before\nlet player_pos = player_transform.translation.truncate();\nlet target_pos = enemy_transform.translation.truncate();\nlet midpoint = (player_pos + target_pos) / 2.0;\n\n// After\nlet player_xz = Vec2::new(player_transform.translation.x, player_transform.translation.z);\nlet target_xz = Vec2::new(enemy_transform.translation.x, enemy_transform.translation.z);\nlet midpoint_xz = (player_xz + target_xz) / 2.0;\nlet midpoint = Vec3::new(midpoint_xz.x, 0.5, midpoint_xz.y); // Y at entity height\n```\n\n### 3. Update Laser Rotation\nFor 3D, rotation should be around Y axis to point toward target on XZ plane:\n```rust\nlet direction = (target_xz - player_xz).normalize();\nlet angle = direction.y.atan2(direction.x);\nlet rotation = Quat::from_rotation_y(-angle + std::f32::consts::FRAC_PI_2);\n```\n\n### 4. Update Laser Hit Detection\nAlready covered in collision detection task, but ensure laser line segment uses XZ coordinates.\n\n### 5. Add Emissive Material for Glow\nUse emissive property of StandardMaterial for laser glow effect:\n```rust\nStandardMaterial {\n    base_color: Color::srgb(0.0, 1.0, 1.0),\n    emissive: LinearRgba::rgb(0.0, 2.0, 2.0), // HDR glow\n    unlit: true, // Don't apply lighting\n    ..default()\n}\n```\n\n## Testing Requirements\n- Unit test: Laser spawns with Mesh3d component\n- Unit test: Laser mesh is elongated cube/beam shape\n- Unit test: Laser positioned between player and target\n- Unit test: Laser rotation points toward target on XZ plane\n- Unit test: Laser Y position at entity height\n- Unit test: Laser material has emissive glow\n- Update existing laser tests for 3D\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Laser renders as 3D beam (stretched cube)\n- [ ] Laser positioned correctly between player and enemy\n- [ ] Laser rotates to point at target on XZ plane\n- [ ] Laser has emissive/glowing appearance\n- [ ] Laser damage system unchanged\n- [ ] No Sprite components in laser\n- [ ] All laser tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:22.09061+11:00","updated_at":"2025-12-28T10:35:44.834103+11:00","closed_at":"2025-12-28T10:35:44.834103+11:00","dependencies":[{"issue_id":"dt-survivor-e43","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.89797+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e43","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.562324+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-e9f","title":"Create Velocity and Speed components","description":"Create movement components in src/movement/components.rs: Velocity(Vec2), Speed(f32), Knockback { direction: Vec2, force: f32, duration: Timer }. These are reusable for player, enemies, and projectiles. Include tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T17:41:29.475915+11:00","updated_at":"2025-12-25T19:18:06.400837+11:00","closed_at":"2025-12-25T19:18:06.400837+11:00","dependencies":[{"issue_id":"dt-survivor-e9f","depends_on_id":"dt-survivor-6q4","type":"blocks","created_at":"2025-12-25T17:41:45.165143+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-e9f","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:41:45.874979+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-f77","title":"Add Health component to enemies","description":"Modify src/enemies/systems.rs to spawn enemies with Health component. Update src/bullets/systems.rs and src/laser/systems.rs to use DamageEvent instead of instant despawn. Enemies should now take damage and die when health reaches 0. Enables multi-hit enemies and boss fights.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.947115+11:00","updated_at":"2025-12-25T18:33:28.201304+11:00","closed_at":"2025-12-25T18:33:28.201304+11:00","dependencies":[{"issue_id":"dt-survivor-f77","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:40:45.450648+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-f77","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:46.014939+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-ggr","title":"Create GameMeshes and GameMaterials resources for 3D entity rendering","description":"# Task: Shared 3D Asset Resources\n\n## Context\nDT Survivor is migrating from 2D sprites to 3D cubes. To efficiently render many entities (player, enemies, bullets, loot), we need shared mesh and material handles that can be cloned rather than recreating assets for each entity.\n\n## Current Implementation\n- Entities use `Sprite::from_color()` which creates inline sprite data\n- No shared mesh/material resources exist\n- Each entity spawns with its own sprite configuration\n\n## Required Changes\n\n### 1. Create Resource Structs (src/game/resources.rs)\n```rust\n#[derive(Resource)]\npub struct GameMeshes {\n    pub player: Handle\u003cMesh\u003e,      // 1.0 x 1.0 x 1.0 cube\n    pub enemy: Handle\u003cMesh\u003e,       // 0.75 x 0.75 x 0.75 cube\n    pub bullet: Handle\u003cMesh\u003e,      // 0.3 x 0.3 x 0.3 cube\n    pub loot_small: Handle\u003cMesh\u003e,  // 0.4 x 0.4 x 0.4 cube (XP orbs)\n    pub loot_large: Handle\u003cMesh\u003e,  // 0.6 x 0.6 x 0.6 cube (weapons)\n    pub rock: Handle\u003cMesh\u003e,        // 1.0 x 0.5 x 1.0 cube (flat)\n}\n\n#[derive(Resource)]\npub struct GameMaterials {\n    pub player: Handle\u003cStandardMaterial\u003e,      // Green, slight emissive\n    pub enemy: Handle\u003cStandardMaterial\u003e,       // Red\n    pub bullet: Handle\u003cStandardMaterial\u003e,      // Yellow, emissive\n    pub xp_orb: Handle\u003cStandardMaterial\u003e,      // Light grey\n    pub health_pack: Handle\u003cStandardMaterial\u003e, // Green\n    pub weapon_pistol: Handle\u003cStandardMaterial\u003e,  // Yellow\n    pub weapon_laser: Handle\u003cStandardMaterial\u003e,   // Blue\n    pub weapon_rocket: Handle\u003cStandardMaterial\u003e,  // Orange\n    pub rock: Handle\u003cStandardMaterial\u003e,        // Grey\n}\n```\n\n### 2. Create Setup System\n```rust\npub fn setup_game_assets(\n    mut commands: Commands,\n    mut meshes: ResMut\u003cAssets\u003cMesh\u003e\u003e,\n    mut materials: ResMut\u003cAssets\u003cStandardMaterial\u003e\u003e,\n) {\n    commands.insert_resource(GameMeshes {\n        player: meshes.add(Cuboid::new(1.0, 1.0, 1.0)),\n        enemy: meshes.add(Cuboid::new(0.75, 0.75, 0.75)),\n        // ... etc\n    });\n    \n    commands.insert_resource(GameMaterials {\n        player: materials.add(StandardMaterial {\n            base_color: Color::srgb(0.0, 1.0, 0.0),\n            emissive: LinearRgba::rgb(0.0, 0.2, 0.0),\n            ..default()\n        }),\n        // ... etc\n    });\n}\n```\n\n### 3. Register in Plugin\n- Add `setup_game_assets` to run in `OnEnter(GameState::InGame)` or `Startup`\n- Ensure it runs before entity spawning systems\n\n## Testing Requirements\n- Unit test: GameMeshes resource contains valid handles after setup\n- Unit test: GameMaterials resource contains valid handles after setup\n- Unit test: All mesh sizes match expected dimensions\n- Unit test: All material colors match expected values\n- Unit test: Resources are available after entering InGame state\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] GameMeshes resource defined with all entity mesh handles\n- [ ] GameMaterials resource defined with all entity material handles\n- [ ] setup_game_assets system creates and inserts both resources\n- [ ] Meshes use appropriate sizes for visual hierarchy (player \u003e enemy \u003e bullet)\n- [ ] Materials use distinguishable colors matching current 2D colors\n- [ ] Resources exported from game module for other modules to use\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:28.687202+11:00","updated_at":"2025-12-28T10:01:44.269706+11:00","closed_at":"2025-12-28T10:01:44.269706+11:00","dependencies":[{"issue_id":"dt-survivor-ggr","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.241775+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-gtg","title":"Migrate game from 2D to 3D isometric view","description":"# Epic: 2D to 3D Migration\n\nConvert DT Survivor from 2D sprites to 3D isometric/3/4 view with:\n- Orthographic 3D camera at ~30-45Â° angle\n- Ground plane (XZ) with Y as up axis\n- Cubes replacing sprites for all entities\n- DirectionalLight + PointLight (follows player)\n- bevy_hanabi particles replacing Whisper 2D materials\n\n## Coordinate System Change\n- **Current**: XY ground plane, Z for layer ordering\n- **Target**: XZ ground plane, Y for height (Bevy default, compatible with Blender \"+Y Up\" export)\n\n## Key Files Affected\n- src/main.rs - Remove Lighting2dPlugin\n- src/game/systems.rs - Camera, lighting, entity spawning\n- src/movement/systems.rs - XYâ†’XZ conversion\n- src/player/systems.rs - Camera follow\n- src/enemies/systems.rs, bullets/systems.rs, loot/systems.rs - Cube spawning\n- src/whisper/* - Replace Material2d with particles\n\n## Testing Strategy\nEach subtask must maintain 90% code coverage. All existing tests must be updated to use 3D coordinates (XZ plane). Integration tests should verify visual rendering in 3D.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-28T09:44:21.363951+11:00","updated_at":"2025-12-28T09:44:21.363951+11:00"}
{"id":"dt-survivor-nq8","title":"Replace Camera2d with orthographic Camera3d and add 3D lighting","description":"# Task: Core 3D Infrastructure\n\n## Context\nDT Survivor is being migrated from 2D to 3D isometric view. This task sets up the foundational 3D rendering infrastructure: camera with orthographic projection at isometric angle, and 3D lighting to replace the 2D lighting system.\n\n## Current Implementation\n- `src/game/systems.rs:19-39`: Camera2d with HDR, Bloom, Lighting2dSettings, AmbientLight2d\n- `src/main.rs`: Registers `Lighting2dPlugin` from bevy_lit\n\n## Required Changes\n\n### 1. Remove 2D Lighting Plugin (src/main.rs)\n- Remove `use bevy_lit::prelude::*` import\n- Remove `.add_plugins(Lighting2dPlugin)` registration\n\n### 2. Replace Camera (src/game/systems.rs)\nReplace Camera2d setup with:\n```rust\ncommands.spawn((\n    Camera3d::default(),\n    Projection::Orthographic(OrthographicProjection {\n        scaling_mode: ScalingMode::FixedVertical { viewport_height: 20.0 },\n        ..default()\n    }),\n    Hdr,\n    Tonemapping::TonyMcMapface,\n    Bloom { intensity: 0.3, ..default() },\n    Transform::from_xyz(0.0, 20.0, 15.0).looking_at(Vec3::ZERO, Vec3::Y),\n));\n```\n\n### 3. Add 3D Lighting\n```rust\n// Directional light (sun)\ncommands.spawn((\n    DirectionalLight {\n        illuminance: 10000.0,\n        shadows_enabled: true,\n        ..default()\n    },\n    Transform::from_rotation(Quat::from_euler(EulerRot::XYZ, -0.8, 0.4, 0.0)),\n));\n\n// Ambient light resource\ncommands.insert_resource(AmbientLight {\n    color: Color::WHITE,\n    brightness: 200.0,\n});\n```\n\n### 4. Add Ground Plane\n```rust\ncommands.spawn((\n    Mesh3d(meshes.add(Plane3d::new(Vec3::Y, Vec2::new(100.0, 100.0)))),\n    MeshMaterial3d(materials.add(StandardMaterial {\n        base_color: Color::srgb(0.2, 0.2, 0.3),\n        ..default()\n    })),\n    Transform::from_translation(Vec3::ZERO),\n));\n```\n\n## Testing Requirements\n- Unit test: Verify camera spawns with correct projection type\n- Unit test: Verify camera transform position and rotation\n- Unit test: Verify DirectionalLight spawns with shadows enabled\n- Unit test: Verify AmbientLight resource is inserted\n- Unit test: Verify ground plane mesh spawns at Y=0\n- Integration test: Game starts without panic after changes\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Lighting2dPlugin removed from main.rs\n- [ ] Camera2d replaced with Camera3d + orthographic projection\n- [ ] Camera positioned for isometric view (~30-45Â° angle)\n- [ ] DirectionalLight provides main scene illumination\n- [ ] AmbientLight provides base illumination\n- [ ] Ground plane visible as flat surface at Y=0\n- [ ] HDR and Bloom effects still functional\n- [ ] All existing camera tests updated for 3D\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:26.845484+11:00","updated_at":"2025-12-28T10:07:33.77432+11:00","closed_at":"2025-12-28T10:07:33.77432+11:00","dependencies":[{"issue_id":"dt-survivor-nq8","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.173058+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-o1l","title":"Implement advanced Whisper visual effects (lighting, particles, bloom)","description":"Implement the full visual effects for Whisper lightning ball:\n\n1. Camera Setup:\n   - Add Lighting2dSettings to camera for bevy_lit\n   - Enable Bevy bloom effect\n\n2. PointLight2d:\n   - Add cyan/white PointLight2d to WhisperCompanion\n   - Configure: intensity 4.0, outer_radius 240.0, falloff 2.0\n\n3. Hanabi GPU Particles:\n   - Create spark effect: 120 particles/sec, 0.35s lifetime\n   - Velocity: 180px/s outward sphere\n   - Size: 4px â†’ 0px over lifetime\n   - Color: Cyan/white\n\n4. Enhanced arc effects:\n   - Replace simple sprites with more dynamic bolt patterns\n   - Add glow/bloom to arc sprites","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T09:17:16.185782+11:00","updated_at":"2025-12-26T09:34:46.888549+11:00","closed_at":"2025-12-26T09:34:46.888549+11:00","dependencies":[{"issue_id":"dt-survivor-o1l","depends_on_id":"dt-survivor-cq2","type":"blocks","created_at":"2025-12-26T09:17:28.652257+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-qy4","title":"Update player mouse input to use 3D ray casting","description":"# Task: Player Input 3D Ray Casting\n\n## Context\nDT Survivor is migrating from 2D to 3D. Player movement is controlled by clicking on the screen. Currently, cursor position is converted to 2D world coordinates using `viewport_to_world_2d`. For 3D, we need to cast a ray from the camera through the cursor and intersect it with the ground plane (Y=0).\n\n## Current Implementation\n**Player Movement** (`src/movement/systems.rs:39-82`):\n```rust\npub fn player_movement(\n    // ... params\n    camera_query: Query\u003c(\u0026Camera, \u0026GlobalTransform)\u003e,\n    // ...\n) {\n    // ... button check ...\n    \n    if let Some(world_pos) = camera.viewport_to_world_2d(camera_transform, cursor_pos) {\n        let direction = (world_pos - player_pos).normalize_or_zero();\n        // ... apply movement\n    }\n}\n```\n\nUses `viewport_to_world_2d` which returns `Option\u003cVec2\u003e` for 2D world position.\n\n## Required Changes\n\n### 1. Replace viewport_to_world_2d with 3D Ray Casting\n```rust\npub fn player_movement(\n    buttons: Res\u003cButtonInput\u003cMouseButton\u003e\u003e,\n    windows: Query\u003c\u0026Window\u003e,\n    camera_query: Query\u003c(\u0026Camera, \u0026GlobalTransform), With\u003cCamera3d\u003e\u003e,\n    mut player_query: Query\u003c(\u0026mut Transform, \u0026Player)\u003e,\n    time: Res\u003cTime\u003e,\n) {\n    if !buttons.pressed(MouseButton::Left) {\n        return;\n    }\n\n    let window = windows.single();\n    let Some(cursor_pos) = window.cursor_position() else { return };\n    \n    let Ok((camera, camera_transform)) = camera_query.get_single() else { return };\n    let Ok((mut player_transform, player)) = player_query.get_single_mut() else { return };\n\n    // Cast ray from camera through cursor\n    let Some(ray) = camera.viewport_to_world(camera_transform, cursor_pos) else { return };\n    \n    // Intersect ray with Y=0 plane (ground)\n    // Ray: origin + direction * t = point\n    // For Y=0: origin.y + direction.y * t = 0\n    // Therefore: t = -origin.y / direction.y\n    if ray.direction.y.abs() \u003c 0.0001 {\n        return; // Ray parallel to ground, no intersection\n    }\n    \n    let t = -ray.origin.y / ray.direction.y;\n    if t \u003c 0.0 {\n        return; // Intersection behind camera\n    }\n    \n    let world_pos = ray.origin + ray.direction * t;\n    let target_xz = Vec2::new(world_pos.x, world_pos.z);\n    let player_xz = Vec2::new(player_transform.translation.x, player_transform.translation.z);\n    \n    let direction = (target_xz - player_xz).normalize_or_zero();\n    \n    // Apply movement on XZ plane\n    let speed = player.speed; // Apply slow modifier if present\n    let movement = direction * speed * time.delta_secs();\n    player_transform.translation += Vec3::new(movement.x, 0.0, movement.y);\n}\n```\n\n### 2. Update Query to Use Camera3d\nChange camera query to filter by `Camera3d` component.\n\n### 3. Handle SlowModifier\nEnsure `SlowModifier` component still works for speed reduction:\n```rust\nlet effective_speed = if let Ok(slow) = slow_query.get(player_entity) {\n    player.speed * slow.multiplier\n} else {\n    player.speed\n};\n```\n\n## Testing Requirements\n- Unit test: Ray casting returns correct world position\n- Unit test: Ray-plane intersection calculates correct XZ point\n- Unit test: Player moves toward cursor world position\n- Unit test: Movement applies to X and Z axes only\n- Unit test: Player Y position unchanged\n- Unit test: Parallel ray (edge case) handled gracefully\n- Unit test: Behind-camera intersection ignored\n- Update existing player movement tests\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] viewport_to_world_2d replaced with 3D ray casting\n- [ ] Ray intersects Y=0 ground plane correctly\n- [ ] Player moves toward click position on XZ plane\n- [ ] Player Y position stays constant\n- [ ] Edge cases handled (parallel ray, behind camera)\n- [ ] SlowModifier still reduces movement speed\n- [ ] Mouse button detection unchanged\n- [ ] All movement tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:18.998883+11:00","updated_at":"2025-12-28T10:26:08.600548+11:00","closed_at":"2025-12-28T10:26:08.600548+11:00","dependencies":[{"issue_id":"dt-survivor-qy4","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.701572+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-qy4","depends_on_id":"dt-survivor-nq8","type":"blocks","created_at":"2025-12-28T09:50:36.726173+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-rfz","title":"Replace Whisper 2D materials with bevy_hanabi particle effects","description":"# Task: Whisper Particle Replacement\n\n## Context\nDT Survivor is migrating from 2D to 3D. The Whisper weapon uses custom 2D materials (`AdditiveTextureMaterial`, `AdditiveColorMaterial`) for glow and lightning effects that are incompatible with 3D rendering. Per user decision, these will be replaced with bevy_hanabi particle effects which already work in 3D.\n\n## Current Implementation\n**2D Materials** (`src/whisper/materials.rs`):\n- `AdditiveTextureMaterial`: Custom Material2d with additive blend shader for glow\n- `AdditiveColorMaterial`: Custom Material2d for solid color lightning bolts\n\n**Plugin Registration** (`src/whisper/plugin.rs:14-17`):\n```rust\n.add_plugins((\n    Material2dPlugin::\u003cAdditiveTextureMaterial\u003e::default(),\n    Material2dPlugin::\u003cAdditiveColorMaterial\u003e::default(),\n))\n```\n\n**2D Mesh Usage** (`src/whisper/systems.rs`):\n- Uses `Mesh2d` and `MeshMaterial2d` for glow textures\n- Uses `PointLight2d` for lighting effects\n\n## Required Changes\n\n### 1. Remove 2D Material Plugin Registration\nIn `src/whisper/plugin.rs`, remove:\n```rust\nMaterial2dPlugin::\u003cAdditiveTextureMaterial\u003e::default(),\nMaterial2dPlugin::\u003cAdditiveColorMaterial\u003e::default(),\n```\n\n### 2. Remove 2D Material Spawning\nRemove or replace entities that use:\n- `Mesh2d` component\n- `MeshMaterial2d\u003cAdditiveTextureMaterial\u003e`\n- `MeshMaterial2d\u003cAdditiveColorMaterial\u003e`\n- `PointLight2d`\n\n### 3. Enhance Particle Effects\nThe existing bevy_hanabi particles should be enhanced to replace the visual effects:\n\n**Glow Effect Replacement**:\n```rust\n// Create a particle burst for glow\nlet mut gradient = Gradient::new();\ngradient.add_key(0.0, Vec4::new(1.0, 0.3, 0.3, 1.0)); // Red glow\ngradient.add_key(1.0, Vec4::new(1.0, 0.1, 0.1, 0.0)); // Fade out\n\n// Spawner with short-lived particles around whisper\nlet spawner = Spawner::rate(50.0.into());\n```\n\n**Lightning Effect Replacement**:\n```rust\n// Quick spark particles for lightning\nlet mut gradient = Gradient::new();\ngradient.add_key(0.0, Vec4::new(1.0, 0.0, 0.0, 1.0)); // Bright red\ngradient.add_key(0.5, Vec4::new(1.0, 0.5, 0.0, 0.8)); // Orange\ngradient.add_key(1.0, Vec4::new(0.5, 0.0, 0.0, 0.0)); // Fade\n\n// Burst spawner for lightning flashes\nlet spawner = Spawner::burst(20.0.into(), 0.1.into());\n```\n\n### 4. Update Particle Axes for 3D\nChange particle spawn circles from XY plane to XZ plane:\n```rust\n// Before (2D)\nlet init_pos = SetPositionCircleModifier {\n    axis: writer.lit(Vec3::Z).expr(), // Circle in XY plane\n    ...\n};\n\n// After (3D)\nlet init_pos = SetPositionCircleModifier {\n    axis: writer.lit(Vec3::Y).expr(), // Circle in XZ plane (ground)\n    ...\n};\n```\n\n### 5. Add 3D PointLight for Glow\nReplace `PointLight2d` with 3D `PointLight`:\n```rust\ncommands.spawn((\n    PointLight {\n        color: Color::srgb(1.0, 0.3, 0.3),\n        intensity: 5000.0,\n        radius: 5.0,\n        ..default()\n    },\n    Transform::from_translation(whisper_position),\n    WhisperLight, // Marker component\n));\n```\n\n### 6. Clean Up Unused Code\n- Remove or deprecate `AdditiveTextureMaterial` and `AdditiveColorMaterial`\n- Remove shader files if no longer needed: `assets/shaders/additive_textured.wgsl`, `additive_color.wgsl`\n- Remove texture loading for 2D glow textures\n\n## Testing Requirements\n- Unit test: Whisper spawns without 2D material components\n- Unit test: Particle effects spawn with correct axis\n- Unit test: PointLight3d follows whisper position\n- Unit test: No Mesh2d components in whisper entities\n- Unit test: Particle gradient colors correct\n- Integration test: Whisper weapon functions without crash\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Material2dPlugin registrations removed\n- [ ] No Mesh2d or MeshMaterial2d components used\n- [ ] PointLight2d replaced with PointLight (3D)\n- [ ] Particle effects provide visual feedback\n- [ ] Particle spawn axes updated for XZ ground plane\n- [ ] Whisper weapon still functions correctly\n- [ ] No visual artifacts or crashes\n- [ ] All whisper tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:20.713811+11:00","updated_at":"2025-12-28T11:14:26.843123+11:00","closed_at":"2025-12-28T11:14:26.843123+11:00","dependencies":[{"issue_id":"dt-survivor-rfz","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.832154+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-rfz","depends_on_id":"dt-survivor-nq8","type":"blocks","created_at":"2025-12-28T09:50:36.857261+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-rfz","depends_on_id":"dt-survivor-8i6","type":"blocks","created_at":"2025-12-28T10:41:53.848561+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-ryh","title":"Update camera follow system for 3D isometric view","description":"# Task: Camera Follow System Update\n\n## Context\nDT Survivor is migrating from 2D to 3D. The camera currently tracks the player by copying X and Y coordinates. For the 3D isometric view, the camera must maintain a fixed offset and rotation while following the player on the XZ plane.\n\n## Current Implementation\n**Camera Follow** (`src/player/systems.rs:194-209`):\n```rust\npub fn camera_follow_player(\n    player_query: Query\u003c\u0026Transform, With\u003cPlayer\u003e\u003e,\n    mut camera_query: Query\u003c\u0026mut Transform, (With\u003cCamera\u003e, Without\u003cPlayer\u003e)\u003e,\n    mut player_position: ResMut\u003cPlayerPosition\u003e,\n) {\n    if let Ok(player_transform) = player_query.single() {\n        let player_pos = player_transform.translation.truncate();\n        player_position.0 = player_pos;\n\n        for mut camera_transform in camera_query.iter_mut() {\n            camera_transform.translation.x = player_transform.translation.x;\n            camera_transform.translation.y = player_transform.translation.y;\n        }\n    }\n}\n```\n\n## Required Changes\n\n### 1. Update Camera Follow to Maintain Isometric Offset\n```rust\npub fn camera_follow_player(\n    player_query: Query\u003c\u0026Transform, With\u003cPlayer\u003e\u003e,\n    mut camera_query: Query\u003c\u0026mut Transform, (With\u003cCamera3d\u003e, Without\u003cPlayer\u003e)\u003e,\n    mut player_position: ResMut\u003cPlayerPosition\u003e,\n) {\n    if let Ok(player_transform) = player_query.single() {\n        // Update PlayerPosition with XZ coordinates\n        player_position.0 = Vec2::new(\n            player_transform.translation.x,\n            player_transform.translation.z,\n        );\n\n        // Isometric camera offset (matching initial camera setup)\n        let camera_offset = Vec3::new(0.0, 20.0, 15.0);\n        \n        for mut camera_transform in camera_query.iter_mut() {\n            // Maintain offset while following player on XZ plane\n            let target_pos = player_transform.translation + camera_offset;\n            camera_transform.translation = target_pos;\n            // Note: Rotation is fixed (set during camera spawn)\n        }\n    }\n}\n```\n\n### 2. Update Query to Use Camera3d\nChange from `With\u003cCamera\u003e` to `With\u003cCamera3d\u003e` to match new camera type.\n\n### 3. Update PlayerPosition Extraction\nEnsure `PlayerPosition` stores XZ coordinates (X, Z) instead of XY:\n```rust\nplayer_position.0 = Vec2::new(\n    player_transform.translation.x,\n    player_transform.translation.z, // Z instead of Y\n);\n```\n\n### 4. Consider Smooth Following (Optional Enhancement)\nFor smoother camera movement, add interpolation:\n```rust\nlet target_pos = player_transform.translation + camera_offset;\ncamera_transform.translation = camera_transform.translation.lerp(target_pos, 5.0 * time.delta_secs());\n```\n\n## Testing Requirements\n- Unit test: Camera maintains correct offset from player\n- Unit test: Camera offset is Vec3(0, 20, 15)\n- Unit test: Camera follows player movement on XZ plane\n- Unit test: Camera Y position stays at player.y + 20\n- Unit test: Camera rotation unchanged during following\n- Unit test: PlayerPosition updated with XZ coordinates\n- Update existing camera tests for 3D\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] Camera follows player on XZ plane\n- [ ] Camera maintains fixed Y offset above player\n- [ ] Camera maintains fixed Z offset behind player\n- [ ] Camera rotation stays fixed (isometric angle)\n- [ ] PlayerPosition resource updated correctly\n- [ ] Query uses Camera3d component\n- [ ] All camera tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:18.811863+11:00","updated_at":"2025-12-28T10:18:42.251049+11:00","closed_at":"2025-12-28T10:18:42.251049+11:00","dependencies":[{"issue_id":"dt-survivor-ryh","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.635111+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-ryh","depends_on_id":"dt-survivor-nq8","type":"blocks","created_at":"2025-12-28T09:50:36.660028+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-s2u","title":"Refactor codebase to Bevy ECS best practices","description":"Comprehensive refactoring to align the dt-survivor codebase with Bevy ECS best practices. Includes: unified combat module with Health/Damage components, SystemSets for explicit ordering, movement module consolidation, weapon plugin population, loot module cleanup, event registration fixes, and various polish items. See plan at ~/.claude/plans/lovely-napping-starfish.md for full details.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-25T17:40:02.957854+11:00","updated_at":"2025-12-25T20:11:37.36042+11:00","closed_at":"2025-12-25T20:11:37.36042+11:00"}
{"id":"dt-survivor-ubg","title":"Consolidate timer cleanup components","description":"Replace AudioCleanupTimer, ExperienceAudioCleanupTimer, LootAudioCleanupTimer with generic CleanupTimer { timer: Timer, cleanup_type: CleanupType }. Create CleanupType enum with Audio, Experience, Loot variants. Update systems in audio, experience, loot modules.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-25T17:42:02.50933+11:00","updated_at":"2025-12-25T19:57:36.794894+11:00","closed_at":"2025-12-25T19:57:36.794894+11:00","dependencies":[{"issue_id":"dt-survivor-ubg","depends_on_id":"dt-survivor-xp9","type":"blocks","created_at":"2025-12-25T17:42:19.955527+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-ubg","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:42:21.259164+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-umn","title":"Convert loot spawning from Sprite to Mesh3d cubes","description":"# Task: Loot 3D Spawning\n\n## Context\nDT Survivor is migrating from 2D to 3D. Loot items (XP orbs, weapons, health packs, powerups) spawn as colored sprites when enemies die and need to be converted to 3D cubes. Loot attraction physics work on XY plane and must be converted to XZ.\n\n## Current Implementation\n**Loot Spawning** (`src/loot/systems.rs:15-128`):\n```rust\n// Experience orbs\ncommands.spawn((\n    Sprite::from_color(Color::srgb(0.75, 0.75, 0.75), Vec2::new(8.0, 8.0)),\n    Transform::from_translation(Vec3::new(enemy_pos.x + offset_x, enemy_pos.y + offset_y, 0.2)),\n    DroppedItem { pickup_state: PickupState::Idle, item_data: ItemData::Experience { amount }, velocity: Vec2::ZERO },\n));\n\n// Weapon drops\ncommands.spawn((\n    Sprite::from_color(color, Vec2::new(16.0, 16.0)),\n    Transform::from_translation(Vec3::new(enemy_pos.x, enemy_pos.y, 0.5)),\n    DroppedItem { ... },\n));\n```\n\n**Loot Colors by Type**:\n- Pistol: Yellow (1.0, 1.0, 0.0), 16x16\n- Laser: Blue (0.0, 0.0, 1.0), 16x16\n- Rocket: Orange (1.0, 0.5, 0.0), 16x16\n- Health Pack: Green (0.0, 1.0, 0.0), 12x12\n- Experience: Grey (0.75, 0.75, 0.75), 8x8\n\n## Required Changes\n\n### 1. Update Loot Spawn Positions\nConvert from XY to XZ plane:\n```rust\n// Before\nVec3::new(enemy_pos.x + offset_x, enemy_pos.y + offset_y, 0.2)\n\n// After\nVec3::new(enemy_pos.x + offset_x, 0.2, enemy_pos.z + offset_z)\n```\n\n### 2. Update Loot Spawning to Use 3D Meshes\n```rust\n// XP Orb\ncommands.spawn((\n    Mesh3d(game_meshes.loot_small.clone()),\n    MeshMaterial3d(game_materials.xp_orb.clone()),\n    Transform::from_translation(Vec3::new(x, 0.2, z)),\n    DroppedItem { ... },\n));\n\n// Weapon\ncommands.spawn((\n    Mesh3d(game_meshes.loot_large.clone()),\n    MeshMaterial3d(game_materials.weapon_pistol.clone()),\n    Transform::from_translation(Vec3::new(x, 0.3, z)),\n    DroppedItem { ... },\n));\n```\n\n### 3. Update Loot Attraction Physics\nThe loot attraction system uses velocity Vec2 and applies to transform. Update to use XZ:\n```rust\n// Before\ntransform.translation += velocity.extend(0.0) * time.delta_secs();\n\n// After\nlet vel = item.velocity * time.delta_secs();\ntransform.translation += Vec3::new(vel.x, 0.0, vel.y);\n```\n\n### 4. Update Pickup Detection\n```rust\n// Before\nlet loot_pos = loot_transform.translation.truncate();\nlet player_pos = player_transform.translation.truncate();\n\n// After\nlet loot_pos = Vec2::new(loot_transform.translation.x, loot_transform.translation.z);\nlet player_pos = Vec2::new(player_transform.translation.x, player_transform.translation.z);\n```\n\n## Testing Requirements\n- Unit test: XP orbs spawn with Mesh3d component\n- Unit test: Weapon drops spawn with correct material for type\n- Unit test: Loot spawns on XZ plane with correct Y height\n- Unit test: Loot attraction works on XZ plane\n- Unit test: Pickup detection works on XZ plane\n- Unit test: Pickup radius unchanged\n- Update existing loot tests for 3D coordinates\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] XP orbs render as small grey cubes\n- [ ] Weapons render as larger colored cubes (yellow/blue/orange)\n- [ ] Health packs render as green cubes\n- [ ] Loot spawns on XZ plane when enemies die\n- [ ] Loot attraction physics work correctly in 3D\n- [ ] Pickup detection functional on XZ plane\n- [ ] Drop rates unchanged\n- [ ] No Sprite components in loot spawning\n- [ ] All existing loot tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:46:33.773539+11:00","updated_at":"2025-12-28T10:23:16.809182+11:00","closed_at":"2025-12-28T10:23:16.809182+11:00","dependencies":[{"issue_id":"dt-survivor-umn","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.503453+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-umn","depends_on_id":"dt-survivor-ggr","type":"blocks","created_at":"2025-12-28T09:50:35.497345+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-whr","title":"Create combat systems","description":"Create src/combat/systems.rs with: apply_damage (reads DamageEvent, updates Health, fires DeathEvent), check_death (monitors Health \u003c= 0), handle_invincibility (ticks invincibility timers). Include tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.720944+11:00","updated_at":"2025-12-25T18:04:44.3668+11:00","closed_at":"2025-12-25T18:04:44.3668+11:00","dependencies":[{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-y2f","type":"blocks","created_at":"2025-12-25T17:40:45.203649+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-1wg","type":"blocks","created_at":"2025-12-25T17:40:45.294286+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-whr","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.856432+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-xp9","title":"Create CombatPlugin","description":"Create src/combat/plugin.rs with CombatPlugin that registers events, systems with run_if(in_state(GameState::InGame)). Add to main.rs plugin list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.836415+11:00","updated_at":"2025-12-25T18:09:47.843379+11:00","closed_at":"2025-12-25T18:09:47.843379+11:00","dependencies":[{"issue_id":"dt-survivor-xp9","depends_on_id":"dt-survivor-whr","type":"blocks","created_at":"2025-12-25T17:40:45.37134+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-xp9","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.93232+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-y2f","title":"Create Health, Damage, Hitbox components","description":"Create reusable combat components in src/combat/components.rs: Health { current: f32, max: f32 } with take_damage/is_dead methods, Damage(f32) for projectiles, Hitbox(f32) for collision radius, Invincibility(Timer) for damage immunity frames. Include unit tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T17:40:28.501006+11:00","updated_at":"2025-12-25T17:57:55.248747+11:00","closed_at":"2025-12-25T17:57:55.248747+11:00","dependencies":[{"issue_id":"dt-survivor-y2f","depends_on_id":"dt-survivor-1a7","type":"blocks","created_at":"2025-12-25T17:40:45.036797+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-y2f","depends_on_id":"dt-survivor-s2u","type":"parent-child","created_at":"2025-12-25T17:40:45.696396+11:00","created_by":"daemon"}]}
{"id":"dt-survivor-z7l","title":"Update collision detection systems to use XZ plane","description":"# Task: Collision Detection XZ Conversion\n\n## Context\nDT Survivor is migrating from 2D to 3D. Collision detection between entities uses `.truncate()` to get XY positions for distance checks. All collision systems must be updated to use XZ coordinates instead.\n\n## Current Implementation\n**Player-Enemy Collision** (`src/game/systems.rs`):\n```rust\nlet player_pos = player_transform.translation.truncate();\nlet enemy_pos = enemy_transform.translation.truncate();\nlet distance = player_pos.distance(enemy_pos);\n```\n\n**Bullet-Enemy Collision** (`src/bullets/systems.rs`):\nSimilar pattern using `.truncate()` for XY extraction.\n\n**Loot Pickup** (`src/loot/systems.rs`):\nUses `.truncate()` for pickup radius checks.\n\n**Laser Hit Detection** (`src/laser/systems.rs`):\nLine-circle intersection on XY plane.\n\n## Required Changes\n\n### 1. Create Position Extraction Helper\nUse the `from_xz` function from movement module or create locally:\n```rust\nfn get_xz(translation: Vec3) -\u003e Vec2 {\n    Vec2::new(translation.x, translation.z)\n}\n```\n\n### 2. Update Player-Enemy Collision\n```rust\n// Before\nlet player_pos = player_transform.translation.truncate();\nlet enemy_pos = enemy_transform.translation.truncate();\n\n// After\nlet player_pos = Vec2::new(player_transform.translation.x, player_transform.translation.z);\nlet enemy_pos = Vec2::new(enemy_transform.translation.x, enemy_transform.translation.z);\n```\n\n### 3. Update Bullet-Enemy Collision\n```rust\nfn check_bullet_enemy_collision(\n    bullet_query: Query\u003c(Entity, \u0026Transform), With\u003cBullet\u003e\u003e,\n    enemy_query: Query\u003c(Entity, \u0026Transform), With\u003cEnemy\u003e\u003e,\n    // ...\n) {\n    for (bullet_entity, bullet_transform) in bullet_query.iter() {\n        let bullet_pos = Vec2::new(\n            bullet_transform.translation.x,\n            bullet_transform.translation.z,\n        );\n        \n        for (enemy_entity, enemy_transform) in enemy_query.iter() {\n            let enemy_pos = Vec2::new(\n                enemy_transform.translation.x,\n                enemy_transform.translation.z,\n            );\n            \n            if bullet_pos.distance(enemy_pos) \u003c COLLISION_RADIUS {\n                // Handle collision\n            }\n        }\n    }\n}\n```\n\n### 4. Update Loot Pickup Detection\n```rust\nlet loot_pos = Vec2::new(loot_transform.translation.x, loot_transform.translation.z);\nlet player_pos = Vec2::new(player_transform.translation.x, player_transform.translation.z);\nlet distance = loot_pos.distance(player_pos);\nif distance \u003c player.pickup_radius {\n    // Pickup\n}\n```\n\n### 5. Update Laser Hit Detection\nLaser line segment and enemy circle intersection on XZ plane:\n```rust\n// Laser start and end points\nlet start = Vec2::new(laser_start.x, laser_start.z);\nlet end = Vec2::new(laser_end.x, laser_end.z);\nlet enemy_center = Vec2::new(enemy_pos.x, enemy_pos.z);\n// Line-circle intersection math remains the same\n```\n\n### 6. Update Rocket/Explosion Collision\nSimilar XZ extraction for rocket impacts and explosion radius checks.\n\n## Files to Update\n- `src/game/systems.rs` - Player-enemy collision\n- `src/bullets/systems.rs` - Bullet-enemy collision\n- `src/loot/systems.rs` - Pickup detection\n- `src/laser/systems.rs` - Laser hit detection\n- `src/rocket_launcher/systems.rs` - Rocket/explosion collision\n\n## Testing Requirements\n- Unit test: Player-enemy collision detects correctly on XZ\n- Unit test: Bullet-enemy collision works on XZ plane\n- Unit test: Loot pickup detects within radius on XZ\n- Unit test: Laser hit detection works on XZ plane\n- Unit test: Explosion radius checks work on XZ\n- Unit test: Distance calculations ignore Y axis\n- Update all existing collision tests\n- Maintain 90% code coverage\n\n## Acceptance Criteria\n- [ ] All `.truncate()` calls replaced with XZ extraction\n- [ ] Player-enemy collision works in 3D\n- [ ] Bullet-enemy collision works in 3D\n- [ ] Loot pickup detection works in 3D\n- [ ] Laser hit detection works in 3D\n- [ ] Explosion damage works in 3D\n- [ ] Collision radii unchanged\n- [ ] All collision tests updated and passing\n- [ ] `make test` passes with 90%+ coverage\n- [ ] `make lint` passes with no warnings","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:49:19.194458+11:00","updated_at":"2025-12-28T10:35:37.622788+11:00","closed_at":"2025-12-28T10:35:37.622788+11:00","dependencies":[{"issue_id":"dt-survivor-z7l","depends_on_id":"dt-survivor-gtg","type":"parent-child","created_at":"2025-12-28T09:50:33.767041+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-z7l","depends_on_id":"dt-survivor-4i1","type":"blocks","created_at":"2025-12-28T09:50:38.199674+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-z7l","depends_on_id":"dt-survivor-0ql","type":"blocks","created_at":"2025-12-28T09:50:38.268668+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-z7l","depends_on_id":"dt-survivor-a2s","type":"blocks","created_at":"2025-12-28T09:50:38.335113+11:00","created_by":"daemon"},{"issue_id":"dt-survivor-z7l","depends_on_id":"dt-survivor-b67","type":"blocks","created_at":"2025-12-28T09:50:38.400672+11:00","created_by":"daemon"}]}
